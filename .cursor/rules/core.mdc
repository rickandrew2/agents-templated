---
title: "Core Project Guidelines"
description: "Enterprise-grade architecture, stack, and best practices for modern full-stack development"
alwaysApply: true
version: "2.0.0"
tags: ["architecture", "stack", "core", "enterprise"]
globs:
  - "*"
---

## Developer Identity

- The developer is Rick, a full-stack developer focused on **enterprise-grade applications**
- The AI assistant should be called "rick" when referenced
- Prefer clear, step-by-step solutions with **security-first thinking**
- When debugging issues, provide concise but comprehensive instructions

## Enterprise Tech Stack

### Core Framework
- **Frontend**: Next.js 14+ (App Router), React 18+, TypeScript 5+
- **Styling**: Tailwind CSS with design system approach
- **Database**: **Choose ONE approach:**
  - **Option A**: Prisma + PostgreSQL (complex schemas, maximum type safety)
  - **Option B**: Supabase (rapid development, built-in auth/real-time)
- **Authentication**: NextAuth.js v5 with multi-provider support
- **Deployment**: Vercel (preferred), Railway, or Netlify

### Security & Performance
- **Input Validation**: Zod schemas at every boundary
- **Rate Limiting**: Upstash Redis with sliding windows
- **Security Headers**: CSP, HSTS, X-Frame-Options, etc.
- **Bundle Analysis**: @next/bundle-analyzer integration
- **Performance Monitoring**: Core Web Vitals tracking ready

### Testing & Quality
- **Unit/Integration**: Vitest + Testing Library
- **E2E Testing**: Playwright with cross-browser support
- **Accessibility**: axe-core automated testing
- **Code Quality**: ESLint + Prettier + TypeScript strict mode
- **Pre-commit**: Husky + lint-staged quality gates

### Development Tools
- **Type Safety**: Strict TypeScript with enhanced safety settings
- **Code Formatting**: Prettier with Tailwind plugin
- **Linting**: ESLint with security, accessibility, and import rules
- **Testing**: Coverage reporting with 80%+ targets
- **Documentation**: Comprehensive README and architecture docs

## Architecture Principles

### Security-First Development
- **Validate all inputs** with Zod schemas at API boundaries
- **Authenticate and authorize** every protected endpoint
- **Rate limit** public endpoints to prevent abuse
- **Sanitize outputs** to prevent XSS and injection attacks
- **Use HTTPS** and security headers in production
- **Log security events** without exposing sensitive data

### Performance-Focused
- **Server Components** by default, client components only when needed
- **Bundle optimization** with code splitting and tree shaking
- **Image optimization** with Next.js Image component
- **Caching strategies** appropriate for data freshness needs
- **Core Web Vitals** monitoring and optimization

### Type Safety
- **End-to-end typing** from database to UI
- **Runtime validation** with Zod for external data
- **No `any`** usage except for truly dynamic content
- **Strict TypeScript** compilation settings
- **Generated types** for database schemas

### Testing Strategy
- **Unit tests** for business logic and utilities
- **Integration tests** for API routes and data access
- **E2E tests** for critical user journeys
- **Accessibility tests** for public-facing components
- **Performance tests** for Core Web Vitals

## Code Style & Standards

### File Organization
- **Feature-oriented structure** (group by domain, not just by type)
- **Clear separation** of concerns: UI, business logic, data access
- **Shared types** in common modules for reuse
- **Consistent naming** conventions throughout

### TypeScript Standards
- Use **strict mode** with enhanced safety settings
- Prefer **interfaces** over types for object shapes
- Use **branded types** for IDs and sensitive data
- Implement **discriminated unions** for variant patterns
- Leverage **template literal types** for string validation

### Component Standards
- **Functional components** with hooks (no class components)
- **Named exports** preferred over default exports
- **Props interfaces** clearly defined with JSDoc
- **Error boundaries** for production resilience
- **Accessibility attributes** included by default

### Database Standards
- **Choose ONE approach** and maintain consistency
- **Migrations only** for schema changes (no manual DB edits)
- **ORM-only access** (no raw SQL except for complex optimizations)
- **Connection pooling** for production deployments
- **Audit logs** for sensitive data operations

### Security Standards
- **Input validation** at every external boundary
- **Authorization checks** on every protected resource
- **Secure headers** on all HTTP responses
- **Error handling** that doesn't leak sensitive information
- **Dependency scanning** for known vulnerabilities

## Development Workflow

### Quality Gates
- **Pre-commit hooks** run linting and formatting
- **Type checking** must pass before commits
- **Unit tests** must pass with >80% coverage
- **E2E tests** must pass for critical flows
- **Security scan** must pass without high-severity issues

### Environment Management
- **Environment variables** validated at startup
- **Secrets management** never in code or logs
- **Database migrations** applied automatically
- **Feature flags** for gradual rollouts
- **Health checks** for deployment validation

### Performance Standards
- **Bundle size** monitoring with alerts
- **Core Web Vitals** tracking and optimization
- **Database query** optimization and monitoring
- **API response time** monitoring and alerting
- **Memory usage** profiling for production

Remember: This is an **enterprise-grade template** designed for **production applications** that need to scale, be secure, and maintain high code quality standards.
- Responsive design by default

## Communication Style

- When providing fixes, be concise but explicit
- Show exactly what to change, especially for UI forms
- Minimize extra chatter, focus on actionable steps
